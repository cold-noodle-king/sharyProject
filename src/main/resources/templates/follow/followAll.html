<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<title>test_composite_key</title>
	<script>
		function confirmUnfollow(event, form) {
			event.preventDefault(); // 기본 폼 제출 동작 막기
			const result = confirm('팔로우를 취소하시겠습니까?'); // 확인 창 표시

			if (result) { // '예'를 누르면
				form.submit(); // 폼 제출
			} else {
				// '아니오'를 누르면 아무 동작도 하지 않음
			}
		}
	</script>
</head>
<body>

<h1>[ follow list ]</h1>

<h2>나를 팔로우하는 사람들</h2>
<table>
	<thead>
	<tr>
		<th>목록</th>
		<th>팔로워 ID</th>
		<th>날짜</th>
	</tr>
	</thead>
	<tbody>
	<tr th:each="follow, iterStat : ${followers}">
		<td th:text="${iterStat.count}">1</td>
		<td th:text="${follow.followerId}">followerId</td>
		<td th:text="${#temporals.format(follow.followDate, 'yyyy-MM-dd HH:mm:ss')}">followDate</td>
	</tr>
	</tbody>
</table>

<h2>내가 팔로우하고 있는 사람들</h2>
<table>
	<thead>
	<tr>
		<th>목록</th>
		<th>팔로잉 ID</th>
		<th>날짜</th>
		<th>팔로우 취소</th>
	</tr>
	</thead>
	<tbody>
	<tr th:each="follow, iterStat : ${following}">
		<td th:text="${iterStat.count}">1</td>
		<td th:text="${follow.followingId}">followingId</td>
		<td th:text="${#temporals.format(follow.followDate, 'yyyy-MM-dd HH:mm:ss')}">followDate</td>
		<td>
			<form action="/follow/delete" method="post" onsubmit="confirmUnfollow(event, this)">
				<input type="hidden" name="followingId" th:value="${follow.followingId}" />
				<button type="submit">팔로우 취소</button>
			</form>
		</td>
	</tr>
	</tbody>
</table>

</body>
</html>