<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>My Share Note</title>

    <!-- jQuery Î°úÎìú -->
    <script th:src="@{/js/jquery-3.7.1.min.js}"></script>

    <!-- moment.js ÎùºÏù¥Î∏åÎü¨Î¶¨ Î°úÎìú -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>

    <!-- Ïù∏Ï¶ùÎêú ÏÇ¨Ïö©Ïûê IDÎ•º ÏûêÎ∞îÏä§ÌÅ¨Î¶ΩÌä∏Î°ú Ï†ÑÎã¨ -->
    <script th:inline="javascript">
        var authenticatedUserId = /*[[${#authentication.name}]]*/ '';
    </script>

    <!-- Î∂ÄÌä∏Ïä§Ìä∏Îû© CSS Î°úÎìú -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- weather Ïä§ÌÉÄÏùº ÏãúÌä∏ -->
    <link rel="stylesheet" th:href="@{/css/weather.css}">



    <!-- Ìó§ÎçîÏôÄ Ìë∏ÌÑ∞Ïö© Ïä§ÌÉÄÏùº -->
    <link th:href="@{/header/css/styles.css}" rel="stylesheet">
    <link th:href="@{/footer/css/styles.css}" rel="stylesheet">

    <!-- MyNote ÌéòÏù¥ÏßÄ Ï†ÑÏö© CSS ÌååÏùº -->
    <link href="/css/share/MyNote.css" rel="stylesheet">

    <!-- GoogleÌè∞Ìä∏ ÏÇ¨Ïö© ÎßÅÌÅ¨ -->
    <link href='//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSansNeo.css' rel='stylesheet' type='text/css'>
</head>
<body>
<!-- Ìó§Îçî Î∂ÄÎ∂Ñ Î∂àÎü¨Ïò§Í∏∞ -->
<div th:replace="~{fragments/header :: header}"></div>
<br>
<br>

<!-- Î©îÏù∏ Ïª®ÌÖåÏù¥ÎÑà -->
<div id="my-note-main" class="container mt-5">
    <h2><p th:text="${diary.shareDiaryName}"></p></h2>
    <div>
        <p>Î∞©Ïû•: <span th:text="${diary.nickname}"></span> Ïπ¥ÌÖåÍ≥†Î¶¨: <span th:text="${diary.categoryName}"></span>
            <a th:href="@{/share/manageDiary(diaryNum=${diary.shareDiaryNum})}">Îã§Ïù¥Ïñ¥Î¶¨ Í¥ÄÎ¶¨</a></p>
    </div>
    <br>

    <div class="row">
        <!-- ÏÑ†ÌÉùÌïú Îã§Ïù¥Ïñ¥Î¶¨ Ïπ¥Îìú -->
        <div class="col-md-3">
            <div class="card selected-diary-card">
                <img th:src="@{'/images/' + ${diary.coverTemplateName} + '.png'}" alt="Ïª§Î≤Ñ Ïù¥ÎØ∏ÏßÄ" class="card-img-top">
                <div class="card-body">
                    <h5 class="card-title" th:text="${diary.shareDiaryName}">Îã§Ïù¥Ïñ¥Î¶¨ Ïù¥Î¶Ñ</h5>
                </div>
            </div>
        </div>

        <!-- ÏÑ∏Î°ú Í≤ΩÍ≥ÑÏÑ† -->
        <div class="col-md-1 d-flex justify-content-center">
            <div class="vertical-line"></div>
        </div>

        <!-- ÎÖ∏Ìä∏ Î™©Î°ùÍ≥º Ï∂îÍ∞Ä Î≤ÑÌäº -->
        <div class="col-md-8">
            <h3>Note List</h3>
            <div class="my-note-list row">
                <!-- Ïã†Í∑ú ÎÖ∏Ìä∏ Ï∂îÍ∞Ä Î≤ÑÌäº -->
                <div class="col-md-3 mb-4">
                    <div class="add-note-card">
                        <a th:href="@{/share/note(diaryNum=${diary.shareDiaryNum})}">
                            <div class="add-note-icon">+</div>
                        </a>
                    </div>
                </div>

                <!-- ÎÖ∏Ìä∏ Î™©Î°ù -->
                <div class="col-md-3 mb-4" th:each="note : ${noteList}">
                    <div class="my-note-card h-100">
                        <!-- noteTemplate.noteImageÎ•º Ïù¥Ïö©Ìï¥ ÎÖ∏Ìä∏ ÌÖúÌîåÎ¶ø Ïù¥ÎØ∏ÏßÄÎ•º ÌëúÏãú -->
                        <img th:src="@{'/images/' + ${note.noteTemplate.noteName} + '.png'}" alt="ÎÖ∏Ìä∏ Ïù¥ÎØ∏ÏßÄ"
                             class="card-img-top">
                        <div class="card-body">
                            <h5 class="card-title" th:text="${note.shareNoteTitle}">ÎÖ∏Ìä∏ Ï†úÎ™©</h5>
                            <!-- ÎÖ∏Ìä∏ Î≥¥Í∏∞ Î≤ÑÌäº (Î™®Îã¨ Ïó¥Í∏∞) -->
                            <button class="btn btn-primary btn-view-note" th:attr="data-note-num=${note.shareNoteNum}, data-like-cnt=${note.likeCount}">
                                ÎÖ∏Ìä∏ Î≥¥Í∏∞
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Î©îÎâ¥ Î≤ÑÌäº -->
    <div class="text-center mt-4">
        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#menuModal">Î©îÎâ¥</button>
    </div>
</div>

<!-- ÎÖ∏Ìä∏ Î≥¥Í∏∞ Î™®Îã¨ -->
<div class="modal fade" id="noteModal" tabindex="-1" aria-labelledby="noteModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xxl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="noteModalLabel">ÎÖ∏Ìä∏ Ï†úÎ™©</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <!-- ÎÖ∏Ìä∏ ÌÖúÌîåÎ¶ø Ïù¥ÎØ∏ÏßÄ Î∞∞Í≤ΩÏúºÎ°ú ÏÑ§Ï†ï -->
            <div class="modal-body" id="noteContentModal" style="background-size: cover; background-repeat: no-repeat;">
                <!-- ÏΩòÌÖêÏ∏† Ï†ÑÏ≤¥Î•º Î¨∂Îäî div -->
                <div class="content-wrapper">

                    <!-- ÌîÑÎ°úÌïÑ Ïù¥ÎØ∏ÏßÄ Î∞è ÏúÑÏπò/ÎÇ†Ïßú/Í∞êÏ†ï ÏÑπÏÖò -->
                    <div class="d-flex align-items-center mb-4">
                        <div class="profile-image me-3">
                            <img src="/images/profile.png" class="rounded-circle" width="50" height="50" alt="ÌîÑÎ°úÌïÑ">
                        </div>
                        <div class="w-100">

                            <div class="date-emotion-section">
                                <span id="nickname"></span>
                                <span>ÏûëÏÑ±Ïùº: <span id="createdDate"></span></span> <p><span id="noteDate">[ÏûëÏÑ±Ïùº]</span> <!-- ÏûëÏÑ±Ïùº ÌÖçÏä§Ìä∏ -->
                                <span id="noteEmotion" class="ms-3">[Í∞êÏ†ï]</span></p> <!-- Í∞êÏ†ï ÌÖçÏä§Ìä∏ -->
                            </div>
                            <p id="noteLocation">[ÏúÑÏπò]</p> <!-- ÏúÑÏπò ÌÖçÏä§Ìä∏ (Ï∂îÌõÑ ÏàòÏ†ï Í∞ÄÎä•) -->
                        </div>
                    </div>

                    <!-- Ïù¥ÎØ∏ÏßÄ ÏÑπÏÖò -->
                    <div class="image-section">
                        <img src="" alt="ÎÖ∏Ìä∏ ÎÇ¥Ïö© Ïù¥ÎØ∏ÏßÄ" id="personalNoteImage" style="display: none;"> <!-- Ï≤òÏùåÏóêÎäî Ïà®Í∏¥ ÏÉÅÌÉú -->
                    </div>

                    <!-- ÎÇ¥Ïö© ÏÑπÏÖò -->
                    <div class="content-section">
                        <p id="noteContents">[ÎÇ¥Ïö©]</p> <!-- ÎÖ∏Ìä∏ ÎÇ¥Ïö© ÌÖçÏä§Ìä∏ -->
                    </div>

                    <!-- Ìï¥ÏãúÌÉúÍ∑∏ ÏÑπÏÖò -->
                    <div class="hashtag-section">
                        <p id="noteHashtags">[Ìï¥ÏãúÌÉúÍ∑∏]</p> <!-- Ìï¥ÏãúÌÉúÍ∑∏ ÌÖçÏä§Ìä∏ -->
                    </div>

                    <!-- Ï¢ãÏïÑÏöî Î≤ÑÌäº ÏÑπÏÖò -->
                    <div id="likeBox">
                        <input type="hidden" id="cnt">
                        <div class="emoji-buttons">
                            <div class="emoji-container">
                                <span class="likeBtn" data-emoji="1">üòä</span>
                                <span class="emoji-count" id="joyCnt">0</span>
                            </div>
                            <div class="emoji-container">
                                <span class="likeBtn" data-emoji="2">üòç</span>
                                <span class="emoji-count" id="loveCnt">0</span>
                            </div>
                            <div class="emoji-container">
                                <span class="likeBtn" data-emoji="3">üò¢</span>
                                <span class="emoji-count" id="sadCnt">0</span>
                            </div>
                            <div class="emoji-container">
                                <span class="likeBtn" data-emoji="4">üò°</span>
                                <span class="emoji-count" id="angryCnt">0</span>
                            </div>
                            <div class="emoji-container">
                                <span class="likeBtn" data-emoji="5">üòÆ</span>
                                <span class="emoji-count" id="wowCnt">0</span>
                            </div>
                        </div>
                        <p>Í≥µÍ∞ê‚ù§Ô∏è<span id="likeCnt">0</span></p>
                    </div>



                </div> <!-- content-wrapper ÎÅù -->

                <br>
                <div class="content-wrapper">
                    <!-- ÎåìÍ∏Ä ÏÑπÏÖò -->
                    <div class="comment-section">
                        <form>
                            <input type="hidden" id="noteNum" name="noteNum">
                            <div style="text-align: center">
                                <h5>ÎåìÍ∏ÄÏûÖÎ†•</h5> <input id="contents" type="text" name="contents" required="required"
                                                        style="width: 300px">
                                <b><input class="replyBtn" type="button" th:value="ÌôïÏù∏"></b>
                            </div>
                        </form>
                        <table class="comment-table">
                            <thead>
                            <tr>
                                <th colspan="4"><h6>ÎåìÍ∏Ä</h6></th>
                            </tr>
                            </thead>
                            <tbody class="commentTbody">

                            </tbody>
                        </table>

                    </div>

                </div>
            </div>
        </div>
    </div>

    <!-- Î©îÎâ¥ Î™®Îã¨ -->
    <div class="modal fade" id="menuModal" tabindex="-1" aria-labelledby="menuLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <!-- Î™®Îã¨ Ìó§Îçî -->
                <div class="modal-header">
                    <h5 class="modal-title" id="menuLabel">Îã§Ïù¥Ïñ¥Î¶¨ Í¥ÄÎ¶¨</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <!-- Î™®Îã¨ Î≥∏Î¨∏ -->
                <div class="modal-body">
                    <div class="menu-list">
                        <a href="#" th:href="@{/share/manageDiary(diaryNum=${diary.shareDiaryNum})}" class="menu-item action-btn">Îã§Ïù¥Ïñ¥Î¶¨ Í¥ÄÎ¶¨</a>
                        <a href="#" th:href="@{/share/editDiary}" class="menu-item action-btn">Îã§Ïù¥Ïñ¥Î¶¨ ÏàòÏ†ï</a>
                        <a href="#" th:href="@{/sahre/deleteDiary(diaryNum=${diary.shareDiaryNum})}" class="menu-item action-btn">Îã§Ïù¥Ïñ¥Î¶¨ ÏÇ≠Ï†ú</a>
                        <a href="#" th:href="@{/share/addDiarySheet}" class="menu-item action-btn">Îã§Ïù¥Ïñ¥Î¶¨ ÏÜçÏßÄ Ï∂îÍ∞Ä</a>
                    </div>
                </div>

                <!-- Î™®Îã¨ Ìë∏ÌÑ∞ -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary action-btn" data-bs-dismiss="modal">Îã´Í∏∞</button>
                </div>
            </div>
        </div>
    </div>


    <!-- Ìë∏ÌÑ∞ Î∂ÄÎ∂Ñ Î∂àÎü¨Ïò§Í∏∞ -->
    <div th:replace="~{fragments/footer :: footer}"></div>

    <!-- Î∂ÄÌä∏Ïä§Ìä∏Îû© JS Î°úÎìú -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- ÎÖ∏Ìä∏ Î≥¥Í∏∞ JS -->
    <script th:src="@{/js/share/viewNote.js}"></script>
</div>

<!-- weather.js ÌååÏùº Î°úÎìú -->
<script th:src="@{/js/main/weather.js}"></script>
</body>

</html>
